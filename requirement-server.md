# 시대인재 스케줄링 시스템 - 백엔드 서버 기능 요구사항

## 1. 서비스 개요

시대인재 학원 알바생(크루)의 일일 업무 스케줄을 자동으로 배정하고 관리하는 시스템.
크루별 작업 수행 횟수(count)를 기반으로 공평하게 업무를 분배한다.

---

## 2. 도메인 모델

### 크루 (Crew)

| 속성 | 설명 |
|------|------|
| 이름 | 크루원 이름 |
| 크루 유형 | 오전 / 미들 / 오후 |
| 근무 시간 | 오전: ~17:00, 미들: 09:00~17:00, 오후: 14:20~22:00 |
| 인원 | 오전 3명, 미들 2명, 오후 3명 |

### 강의실 (Classroom)

| 속성 | 설명 |
|------|------|
| 호수 | 603, 604, 605, 606 등 |

### 교시 (Period)

| 교시 | 시간 | 비고 |
|------|------|------|
| 1교시 | 08:30 ~ 10:10 | 입실/조그: 오전 only, 퇴실: 오전+미들 |
| 2교시 | 10:30 ~ 12:10 | 오전+미들 count 기반 |
| 3교시 | 13:20 ~ 15:00 | 입실/조그: 오전+미들, 퇴실: 오후 |
| 4교시 | 15:20 ~ 17:00 | 미들+오후 (오전 퇴근) |

### 작업 유형 (TaskType)

| 유형 | 설명 |
|------|------|
| 세팅 | 오전 수업 전 교실/강사 대기실 준비 |
| 입실 | 수업 시작 25분 전 ~ 수업 시작. 학생 안내 및 라이브러리 배부 |
| 조그 | 수업 시작 5분 전 착석 ~ 수업 종료(100분). 녹화 및 인코딩 |
| 퇴실 | 수업 종료 10분 전 대기. 퇴실자료 배부, 칠판 정리, 다음 수업 세팅 |
| 시후 | 시험 있는 수업에서 시험 감독 (수업 시작 ~ +30분, 보통 2명 필요) |

### 스케줄 (Schedule)

| 속성 | 설명 |
|------|------|
| 날짜 | 스케줄 대상 날짜 |
| 교시 | 해당 교시 |
| 강의실 | 대상 강의실 |
| 작업 유형 | 세팅/입실/조그/퇴실/시후 |
| 담당 크루 | 배정된 크루원 |

### 카운트 (Count)

| 속성 | 설명 |
|------|------|
| 크루 | 대상 크루원 |
| 작업 유형 | 작업 종류 |
| 누적 횟수 | 해당 작업을 수행한 총 횟수 |

---

## 3. 기능 요구사항

### P1: 스케줄 자동 배정 (핵심 기능)

#### 3.1.1 오전 세팅 배정

- 오전 크루 3명이 교실 세팅 작업을 분담
- 세팅 작업 목록:
  - 강의실 세팅 (603, 604, 605호 등)
  - 조그 장비 세팅
  - 강사 대기실 세팅
  - 물지우개/지우개 모든 교실 세팅
  - 현판(강의실 안내판) 세팅
  - 조식(스타벅스) 구매 및 세팅
- 교실 수가 인원보다 많으면 한 명이 번갈아 두 개 세팅
- 오전 크루 count 기반 배정

#### 3.1.2 교시별 스케줄 배정

각 교시마다 강의실별로 입실/조그/퇴실 담당자를 자동 배정한다.

**1교시 (08:30 ~ 10:10)**
- 입실/조그: 오전 크루만 배정 가능 (오전 count 기반)
- 퇴실: 오전 + 미들 크루 배정 가능 (오전+미들 count 기반)
- 입실 상세: 08:00 대기 → 08:10~08:30 입실 안내 → 08:40~09:20 결석/지각자 자료 독서실 배부
- 조그 상세: 08:25 착석 → 09:00 전까지 조그 두 개 담당 가능 → 10:10까지 녹화

**2교시 (10:30 ~ 12:10)**
- 입실/조그/퇴실: 오전 + 미들 크루 모두 공평하게 count 기반 배정

**3교시 (13:20 ~ 15:00)**
- 입실/조그: 오전 + 미들 크루 count 기반 배정
- 퇴실: 오후 크루 count 기반 배정

**4교시 (15:20 ~ 17:00)**
- 오전 크루 퇴근 후, 미들 + 오후 크루만 배정

#### 3.1.3 count 기반 공평 배정 알고리즘

- 각 크루원의 작업 유형별 누적 수행 횟수(count)를 관리
- 배정 시 count가 가장 낮은 크루원을 우선 배정
- 동일 count인 경우 배정 규칙 필요 (랜덤 or 이름순 등)

#### 3.1.4 동시간대 다중 강의실 처리

- 같은 교시에 여러 강의실에서 수업이 있을 수 있음
- 인원이 부족한 경우 한 명이 두 강의실을 잠시 커버 가능
- 한 크루원이 동시에 입실+조그를 겸할 수 있음 (예: 605호 1교시 조하은 사례)

### P2: 시험 예외 처리

- 특정 수업에 시험이 있는 경우 시후(시험 감독) 작업 추가
- 시후는 보통 2명 필요
- 수업 시작 시간부터 30분간 진행
- 해당 교시 퇴실 담당자가 시후도 담당

### P3: 작업 교환

- 두 크루원이 합의하여 배정된 작업을 서로 교환 가능
- 교환 시 각자의 count를 해당 작업 유형에 맞게 조정
  - 예: A의 입실 작업과 B의 퇴실 작업 교환 시, A의 입실 count -1 / 퇴실 count +1, B는 반대
- count 조정으로 다음 배정 시 자연스럽게 공평성 유지

### P4: 알림 (추후 구현)

- 크루원에게 스케줄 시작 전 알림 발송
- 알림 시점: 작업 시작 시간 기준 N분 전 (설정 가능)

---

## 4. 비즈니스 규칙 요약

| 규칙 | 설명 |
|------|------|
| 크루 유형별 교시 제약 | 1교시 입실/조그는 오전 only, 3교시 퇴실은 오후 only 등 |
| count 기반 공평 배정 | 누적 count가 낮은 크루원 우선 배정 |
| 크루 유형별 count pool | 같은 유형 크루끼리 count를 비교하여 배정 |
| 다중 강의실 커버 | 인원 부족 시 한 명이 두 강의실 커버 가능 |
| 작업 겸임 | 한 크루원이 입실 후 조그를 이어서 수행 가능 |
| 세팅은 1교시와 독립 | 오전 세팅 배정과 1교시 배정은 별도 시행 |

---

## 5. 향후 고려사항

- 크루원 출결 관리 (결근/지각 시 스케줄 재배정)
- 일일 스케줄 조회 (크루원별 / 강의실별 뷰)
- 주간/월간 스케줄 일괄 생성
- 스케줄 히스토리 관리
